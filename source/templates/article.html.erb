<% current_page.data["title"] = "ConnectingJourneys - #{trip.title}" %>

<div class="main-wrapper">
  <!-- <div class="background-half-white"></div> -->
  <div class="banner-nav" style="background-image:url('<%= trip.banner_photo.url %>');">
    <div class="banner-content text-center">
      <h2 class="h1-style">
        <%= trip.title %>
      </h2>
      <p class="tagline">
        <%= trip.tagline %>
      </p>
    </div>
  </div>

  <div class="wrapper-white">
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <div class="inspiration-text text-center purple">
            <%= Kramdown::Document.new(trip.main_text).to_html %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="wrapper-light-gray">
    <div class="container">
      <!-- Set up your HTML -->
      <div class="owl-carousel owl-carousel-article owl-theme" id="trip-photo">
        <% trip.photos.each do |photo| %>
        <div class="carousel-image text-center">
          <a href="<%= photo.url %>" class="swipebox">
            <div class="carousel-image-item" style="background-image:url('<%= photo.url %>');"></div>
          </a>
        </div>
        <% end %>
      </div>
      <div class="owl-custom-nav">
        <div class="owl-previous-custom owl-nav-chevron" data-target="trip-photo"><i class="fas fa-chevron-left"></i></div>
        <div class="owl-next-custom owl-nav-chevron" data-target="trip-photo"><i class="fas fa-chevron-right"></i></div>
      </div>
    </div>
  </div>
  <div class="wrapper-white">

    <div class="container marged">
      <div class="row">
        <div class="col-xs-12 col-md-6 col-lg-6">
          <div class="journey-description">
            <h2 class="purple">
              Over deze reis
            </h2>
            <p>
              <%= Kramdown::Document.new(trip.description).to_html %>
            </p>

            <div class="charity">
              <%= Kramdown::Document.new(trip.charity_description).to_html %>
            </div>
          </div>
        </div>
        <div class="col-xs-12 col-md-6 col-lg-6">
          <div class="journey-data-container">
            <h2 class="purple">
              Wanneer
            </h2>
            <ul class="data-list list-unstyled">
             <li>
              <span class="identifier"><i class="fas fa-calendar-alt"></i>Data:</span> <%= trip.data %>
            </li>
            <li>
              <span class="identifier"><i class="fas fa-clock"></i>Duur:</span> <%= trip.duration %>
            </li>
          </ul>
          <h2 class="purple">
            Locatie
          </h2>
          <ul class="data-list list-unstyled">
            <li>
              <span class="identifier"><i class="fas fa-map-marker"></i>Waar:</span> <%= trip.where %>
            </li>
            <% if trip.amount_of_kilometers != "" %>
            <li>
              <span class="identifier"><i class="fas fa-compass"></i>Aantal km:</span> <%= trip.amount_of_kilometers %>
            </li>
            <% end %>
          </ul>
          <h2 class="purple">
            Deelnemen
          </h2>
          <ul class="data-list list-unstyled">
            <li>
              <span class="identifier"><i class="fas fa-user"></i>Voor wie:</span> <%= trip.for_who %>
            </li>
            <li>
              <span class="identifier"><i class="fas fa-users"></i>Deelnemers:</span> <%= trip.participants %>
            </li>
            <li>
              <span class="identifier"><i class="fas fa-calendar-check"></i>Inschrijving:</span> <%= trip.registration %>
            </li>
          </ul>
          <% if trip.what != nil && trip.what != "" %>
          <h2 class="purple">
            Details
          </h2>
          <ul class="data-embedded-list">
            <li class="first-level">
              <span class="identifier"><i class="fas fa-globe"></i>Wat:</span>
              <%= trip.what %>
            </li>
          </ul>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<% testimonials = dato.testimonials.select { |testimonial| testimonial.trip == trip } %>

<% if testimonials.length > 0 %>

<div class="wrapper-light-gray">
  <p class="text-center purple small-header">
    Testimonials <br>
    <i class="fas fa-quote-left"></i>
  </p>
  <!-- Set up your HTML -->
  <div class="owl-carousel owl-theme" id="testimonial">
    <% testimonials.each do |testimonial| %>
    <div class="carousel-image text-center">
      <%= Kramdown::Document.new(testimonial.quote_text).to_html %>
      <div class="author purple">
        <%= Kramdown::Document.new(testimonial.full_name_and_company).to_html %>
      </div>
      <div class="avatar" style="background-image:url('<%= testimonial.avatar.url %>');"></div>
    </div>
    <% end %>
  </div>
  <div class="owl-custom-nav">
    <div class="owl-previous-custom owl-nav-chevron" data-target="testimonial"><i class="fas fa-chevron-left"></i></div>
    <div class="owl-next-custom owl-nav-chevron" data-target="testimonial"><i class="fas fa-chevron-right"></i></div>
  </div>
</div>

<% end %>

<div class="wrapper-background-image" style="background-image:url('<%= image_path 'yoga.jpg' %>');">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-lg-10 col-lg-offset-1">
        <div class="cta-box">
          <h2>
            Interesse in deze reis?
          </h2>
          <%= link_to "Neem nu contact op", "/contact.html", class: "button-outline white"  %>
        </div>
      </div>
    </div>
  </div>
</div>
</div>


<% content_for :after_js do %>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    console.log("DOM fully loaded and parsed");
    activateCarouselArticle("trip-photo", 3);
    activateCarouselArticle("testimonial", 1);

    $('.swipebox').swipebox();
  });
</script>
<% end %>
